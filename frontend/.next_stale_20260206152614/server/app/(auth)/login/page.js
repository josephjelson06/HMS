(()=>{var e={};e.id=4665,e.ids=[4665],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8257:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>d,pages:()=>c,routeModule:()=>h,tree:()=>u}),s(4208),s(4713),s(5866),s(4752);var r=s(3191),n=s(8716),a=s(7922),o=s.n(a),l=s(5231),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);s.d(t,i);let u=["",{children:["(auth)",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4208)),"C:\\Users\\josep\\Documents\\AarkayTechnoConsultants\\HMS\\frontend\\app\\(auth)\\login\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,4713)),"C:\\Users\\josep\\Documents\\AarkayTechnoConsultants\\HMS\\frontend\\app\\(auth)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,4752)),"C:\\Users\\josep\\Documents\\AarkayTechnoConsultants\\HMS\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\josep\\Documents\\AarkayTechnoConsultants\\HMS\\frontend\\app\\(auth)\\login\\page.tsx"],d="/(auth)/login/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/(auth)/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},4459:(e,t,s)=>{Promise.resolve().then(s.bind(s,8143))},7958:(e,t,s)=>{Promise.resolve().then(s.bind(s,5537))},8722:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},5303:()=>{},8143:(e,t,s)=>{"use strict";s.d(t,{Providers:()=>o});var r=s(326),n=s(4089),a=s(7043);function o({children:e}){return r.jsx(a.f,{children:r.jsx(n.H,{children:e})})}},5537:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var r=s(326),n=s(7577),a=s(5047),o=s(7773);function l(){let e=(0,a.useRouter)(),{login:t}=(0,o.a)(),[s,l]=(0,n.useState)(""),[i,u]=(0,n.useState)(""),[c,d]=(0,n.useState)(null),[m,h]=(0,n.useState)(!1),p=async r=>{r.preventDefault(),d(null),h(!0);try{let r=await t(s,i),n="admin"===r.user.user_type?"/admin/dashboard":"/hotel/dashboard";e.push(n)}catch(e){d(e instanceof Error?e.message:"Login failed")}finally{h(!1)}};return(0,r.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm",children:"Email"}),r.jsx("input",{type:"email",required:!0,value:s,onChange:e=>l(e.target.value),className:"mt-2 w-full rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-sm",placeholder:"you@company.com"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm",children:"Password"}),r.jsx("input",{type:"password",required:!0,value:i,onChange:e=>u(e.target.value),className:"mt-2 w-full rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-sm",placeholder:"••••••••"})]}),c&&r.jsx("p",{className:"text-sm text-red-400",children:c}),r.jsx("button",{type:"submit",disabled:m,className:"w-full rounded-xl bg-[color:var(--accent)] py-3 text-sm font-semibold text-black shadow-glow disabled:opacity-70",children:m?"Signing in...":"Sign in"})]})}},4089:(e,t,s)=>{"use strict";s.d(t,{H:()=>i,E:()=>u});var r=s(326),n=s(7577),a=s(9684);let o={login:(e,t)=>(0,a.S)("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})}),refresh:()=>(0,a.S)("/auth/refresh",{method:"POST"}),logout:()=>(0,a.S)("/auth/logout",{method:"POST"}),me:()=>(0,a.S)("/auth/me"),startImpersonation:e=>(0,a.S)("/auth/impersonation/start",{method:"POST",body:JSON.stringify(e)}),stopImpersonation:()=>(0,a.S)("/auth/impersonation/stop",{method:"POST"})},l=(0,n.createContext)(void 0);function i({children:e}){let[t,s]=(0,n.useState)(null),[a,i]=(0,n.useState)([]),[u,c]=(0,n.useState)(null),[d,m]=(0,n.useState)(null),[h,p]=(0,n.useState)(!0),x=(0,n.useCallback)(e=>{s(e.user),i(e.permissions),c(e.tenant??null),m(e.impersonation??null)},[]);(0,n.useCallback)(async()=>{try{let e=await o.me();x(e)}catch{try{let e=await o.refresh();x(e)}catch{s(null),i([]),c(null),m(null)}}finally{p(!1)}},[x]);let f=(0,n.useCallback)(async(e,t)=>{let s=await o.login(e,t);return x(s),s},[x]),g=(0,n.useCallback)(async()=>{await o.logout(),s(null),i([]),c(null),m(null)},[]),y=(0,n.useCallback)(async()=>{x(await o.refresh())},[x]),v=(0,n.useCallback)(async e=>{let t=await o.startImpersonation(e);return x(t),t},[x]),b=(0,n.useCallback)(async()=>{let e=await o.stopImpersonation();return x(e),e},[x]),S=(0,n.useMemo)(()=>({user:t,permissions:a,tenant:u,impersonation:d,loading:h,login:f,logout:g,refresh:y,startImpersonation:v,stopImpersonation:b}),[t,a,u,d,h,f,g,y,v,b]);return r.jsx(l.Provider,{value:S,children:e})}function u(){let e=(0,n.useContext)(l);if(!e)throw Error("useAuthContext must be used within AuthProvider");return e}},7043:(e,t,s)=>{"use strict";s.d(t,{F:()=>l,f:()=>o});var r=s(326),n=s(7577);let a=(0,n.createContext)(void 0);function o({children:e}){let[t,s]=(0,n.useState)("dark"),o=(0,n.useCallback)(()=>{let e="dark"===t?"light":"dark";s(e),document.documentElement.setAttribute("data-theme",e)},[t]),l=(0,n.useMemo)(()=>({theme:t,toggleTheme:o}),[t,o]);return r.jsx(a.Provider,{value:l,children:e})}function l(){let e=(0,n.useContext)(a);if(!e)throw Error("useTheme must be used within ThemeProvider");return e}},9684:(e,t,s)=>{"use strict";s.d(t,{S:()=>n});let r=process.env.NEXT_PUBLIC_API_URL??"http://localhost:8000/api";async function n(e,t={}){let s=`${r}${e}`,n=new Headers(t.headers??{}),a=t.method?.toUpperCase()??"GET";if("GET"!==a&&"HEAD"!==a){let e=function(){if("undefined"==typeof document)return null;let e=document.cookie.match(/csrf_token=([^;]+)/);return e?decodeURIComponent(e[1]):null}();e&&n.set("X-CSRF-Token",e),n.has("Content-Type")||n.set("Content-Type","application/json")}let o=await fetch(s,{...t,headers:n,credentials:"include"});if(!o.ok)throw Error(await o.text()||o.statusText);if(204===o.status)return;let l=await o.text();if(l)return JSON.parse(l)}},7773:(e,t,s)=>{"use strict";s.d(t,{a:()=>n});var r=s(4089);function n(){return(0,r.E)()}},5047:(e,t,s)=>{"use strict";var r=s(7389);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},4713:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(9510);function n({children:e}){return r.jsx("div",{className:"auth-layout",children:e})}},4208:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s(9510),n=s(8570);let a=(0,n.createProxy)(String.raw`C:\Users\josep\Documents\AarkayTechnoConsultants\HMS\frontend\components\features\auth\login-form.tsx`),{__esModule:o,$$typeof:l}=a;a.default;let i=(0,n.createProxy)(String.raw`C:\Users\josep\Documents\AarkayTechnoConsultants\HMS\frontend\components\features\auth\login-form.tsx#default`);function u(){return r.jsx("div",{className:"glass-card auth-card",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"badge",children:"HMS Foundation"}),r.jsx("h1",{className:"mt-4 text-3xl",children:"Welcome back"}),r.jsx("p",{className:"text-sm text-[color:var(--muted)]",children:"Sign in to manage your platform or hotel workspace."})]}),r.jsx(i,{})]})})}},4752:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c,metadata:()=>u});var r=s(9510);s(7633);var n=s(8570);let a=(0,n.createProxy)(String.raw`C:\Users\josep\Documents\AarkayTechnoConsultants\HMS\frontend\app\providers.tsx`),{__esModule:o,$$typeof:l}=a;a.default;let i=(0,n.createProxy)(String.raw`C:\Users\josep\Documents\AarkayTechnoConsultants\HMS\frontend\app\providers.tsx#Providers`),u={title:"HMS",description:"Hotel Management System"};function c({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{children:r.jsx(i,{children:e})})})}},7633:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[5819],()=>s(8257));module.exports=r})();