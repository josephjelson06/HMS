(()=>{var e={};e.id=9366,e.ids=[9366],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},300:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>o,routeModule:()=>x,tree:()=>d}),t(7979),t(596),t(4752),t(5866);var a=t(3191),n=t(8716),r=t(7922),l=t.n(r),i=t(5231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);t.d(s,c);let d=["",{children:["admin",{children:["plans",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,7979)),"C:\\Users\\josep\\Documents\\AarkayTechnoConsultants\\HMS\\frontend\\app\\admin\\plans\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,596)),"C:\\Users\\josep\\Documents\\AarkayTechnoConsultants\\HMS\\frontend\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,4752)),"C:\\Users\\josep\\Documents\\AarkayTechnoConsultants\\HMS\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\josep\\Documents\\AarkayTechnoConsultants\\HMS\\frontend\\app\\admin\\plans\\page.tsx"],m="/admin/plans/page",p={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/admin/plans/page",pathname:"/admin/plans",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},558:(e,s,t)=>{Promise.resolve().then(t.bind(t,2802))},4578:(e,s,t)=>{Promise.resolve().then(t.bind(t,9292))},2802:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var a=t(326),n=t(4784),r=t(1072),l=t(9557);function i({children:e}){return a.jsx(l.E,{userType:"admin",children:a.jsx(n.q,{variant:"admin",children:(0,a.jsxs)("div",{className:"min-w-0",children:[a.jsx(r.w,{}),a.jsx("main",{className:"p-6",children:e})]})})})}},9292:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var a=t(326),n=t(7577),r=t(9557),l=t(5430),i=t(3315);let c={name:"",code:"",description:"",price_cents:0,currency:"USD",billing_interval:"monthly",is_active:!0};function d(){let[e,s]=(0,n.useState)([]),[t,d]=(0,n.useState)(!0),[o,m]=(0,n.useState)(c),[p,x]=(0,n.useState)(null),[u,h]=(0,n.useState)(null),v=async()=>{d(!0);try{let e=await i.D.list(1,50);s(e.items)}catch(e){h(e instanceof Error?e.message:"Failed to load plans")}finally{d(!1)}},j=(e,s)=>{m(t=>({...t,[e]:s}))},g=()=>{m(c),x(null)},b=(0,n.useMemo)(()=>({name:o.name,code:o.code||void 0,description:o.description||void 0,price_cents:Number(o.price_cents),currency:o.currency||void 0,billing_interval:o.billing_interval||void 0,is_active:o.is_active}),[o]),y=async e=>{e.preventDefault(),h(null);try{p?await i.D.update(p.id,b):await i.D.create(b),g(),await v()}catch(e){h(e instanceof Error?e.message:"Failed to save plan")}},N=e=>{x(e),m({name:e.name,code:e.code,description:e.description??"",price_cents:e.price_cents,currency:e.currency,billing_interval:e.billing_interval,is_active:e.is_active})},f=async e=>{if(confirm(`Delete ${e.name}? This cannot be undone.`))try{await i.D.remove(e.id),await v()}catch(e){h(e instanceof Error?e.message:"Failed to delete plan")}};return a.jsx(r.n,{permission:"admin:plans:read",fallback:(0,a.jsxs)(l.W,{className:"p-6",children:[a.jsx("h2",{className:"text-2xl",children:"Access denied"}),a.jsx("p",{className:"mt-2 text-sm text-[color:var(--muted)]",children:"You do not have permission to view plans."})]}),children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-2xl",children:"Plans"}),a.jsx("p",{className:"text-sm text-[color:var(--muted)]",children:"Manage subscription plans and pricing tiers."})]}),(0,a.jsxs)("span",{className:"badge",children:[e.length," Plans"]})]}),a.jsx(r.n,{permission:p?"admin:plans:update":"admin:plans:create",children:(0,a.jsxs)(l.W,{className:"p-6",children:[a.jsx("h3",{className:"text-lg",children:p?"Edit Plan":"Create Plan"}),(0,a.jsxs)("form",{className:"mt-4 grid gap-4 md:grid-cols-2",onSubmit:y,children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm",children:"Plan Name"}),a.jsx("input",{value:o.name,onChange:e=>j("name",e.target.value),className:"mt-2 w-full rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-sm",placeholder:"Pro",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm",children:"Code"}),a.jsx("input",{value:o.code,onChange:e=>j("code",e.target.value),className:"mt-2 w-full rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-sm",placeholder:"pro"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm",children:"Price (cents)"}),a.jsx("input",{type:"number",min:0,value:o.price_cents,onChange:e=>j("price_cents",Number(e.target.value)),className:"mt-2 w-full rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-sm",placeholder:"9900"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm",children:"Currency"}),a.jsx("input",{value:o.currency,onChange:e=>j("currency",e.target.value),className:"mt-2 w-full rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-sm",placeholder:"USD"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm",children:"Billing Interval"}),a.jsx("input",{value:o.billing_interval,onChange:e=>j("billing_interval",e.target.value),className:"mt-2 w-full rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-sm",placeholder:"monthly"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:o.is_active,onChange:e=>j("is_active",e.target.checked)}),a.jsx("span",{className:"text-sm",children:"Active"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"text-sm",children:"Description"}),a.jsx("textarea",{value:o.description,onChange:e=>j("description",e.target.value),className:"mt-2 w-full rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-sm",placeholder:"Best for growing hotel groups",rows:3})]}),(0,a.jsxs)("div",{className:"md:col-span-2 flex flex-wrap gap-3",children:[a.jsx("button",{type:"submit",className:"rounded-xl bg-[color:var(--accent)] px-6 py-3 text-sm font-semibold text-black shadow-glow",children:p?"Save Changes":"Create Plan"}),p&&a.jsx("button",{type:"button",className:"rounded-xl border border-white/20 px-6 py-3 text-sm",onClick:g,children:"Cancel"})]})]})]})}),(0,a.jsxs)(l.W,{className:"p-6",children:[a.jsx("h3",{className:"text-lg",children:"Plan Directory"}),u&&a.jsx("p",{className:"mt-2 text-sm text-red-400",children:u}),t?a.jsx("p",{className:"mt-4 text-sm text-[color:var(--muted)]",children:"Loading plans..."}):0===e.length?a.jsx("p",{className:"mt-4 text-sm text-[color:var(--muted)]",children:"No plans created yet."}):a.jsx("div",{className:"mt-4 overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[a.jsx("thead",{className:"text-left text-[color:var(--muted)]",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"pb-3",children:"Name"}),a.jsx("th",{className:"pb-3",children:"Code"}),a.jsx("th",{className:"pb-3",children:"Price"}),a.jsx("th",{className:"pb-3",children:"Interval"}),a.jsx("th",{className:"pb-3",children:"Status"}),a.jsx("th",{className:"pb-3",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-white/10",children:e.map(e=>(0,a.jsxs)("tr",{children:[a.jsx("td",{className:"py-3 font-medium",children:e.name}),a.jsx("td",{className:"py-3 text-[color:var(--muted)]",children:e.code}),(0,a.jsxs)("td",{className:"py-3",children:[(e.price_cents/100).toFixed(2)," ",e.currency]}),a.jsx("td",{className:"py-3",children:e.billing_interval}),a.jsx("td",{className:"py-3",children:e.is_active?"Active":"Inactive"}),(0,a.jsxs)("td",{className:"py-3 flex flex-wrap gap-2",children:[a.jsx(r.n,{permission:"admin:plans:update",children:a.jsx("button",{className:"rounded-full border border-white/20 px-3 py-1 text-xs",onClick:()=>N(e),children:"Edit"})}),a.jsx(r.n,{permission:"admin:plans:delete",children:a.jsx("button",{className:"rounded-full border border-red-400/40 px-3 py-1 text-xs text-red-300",onClick:()=>f(e),children:"Delete"})})]})]},e.id))})]})})]})]})})}},5430:(e,s,t)=>{"use strict";t.d(s,{W:()=>r});var a=t(326),n=t(1135);function r({children:e,className:s}){return a.jsx("div",{className:(0,n.Z)("glass-card",s),children:e})}},3315:(e,s,t)=>{"use strict";t.d(s,{D:()=>n});var a=t(9684);let n={list:(e=1,s=20)=>(0,a.S)(`/admin/plans?page=${e}&limit=${s}`),get:e=>(0,a.S)(`/admin/plans/${e}`),create:e=>(0,a.S)("/admin/plans",{method:"POST",body:JSON.stringify(e)}),update:(e,s)=>(0,a.S)(`/admin/plans/${e}`,{method:"PUT",body:JSON.stringify(s)}),remove:e=>(0,a.S)(`/admin/plans/${e}`,{method:"DELETE"})}},596:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>r,default:()=>i});var a=t(8570);let n=(0,a.createProxy)(String.raw`C:\Users\josep\Documents\AarkayTechnoConsultants\HMS\frontend\app\admin\layout.tsx`),{__esModule:r,$$typeof:l}=n;n.default;let i=(0,a.createProxy)(String.raw`C:\Users\josep\Documents\AarkayTechnoConsultants\HMS\frontend\app\admin\layout.tsx#default`)},7979:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>r,default:()=>i});var a=t(8570);let n=(0,a.createProxy)(String.raw`C:\Users\josep\Documents\AarkayTechnoConsultants\HMS\frontend\app\admin\plans\page.tsx`),{__esModule:r,$$typeof:l}=n;n.default;let i=(0,a.createProxy)(String.raw`C:\Users\josep\Documents\AarkayTechnoConsultants\HMS\frontend\app\admin\plans\page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[5819,8591,9158],()=>t(300));module.exports=a})();