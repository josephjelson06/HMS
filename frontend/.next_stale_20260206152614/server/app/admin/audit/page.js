(()=>{var e={};e.id=3708,e.ids=[3708],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9416:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),s(3319),s(596),s(4752),s(5866);var a=s(3191),r=s(8716),n=s(7922),i=s.n(n),l=s(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["admin",{children:["audit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3319)),"C:\\Users\\josep\\Documents\\AarkayTechnoConsultants\\HMS\\frontend\\app\\admin\\audit\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,596)),"C:\\Users\\josep\\Documents\\AarkayTechnoConsultants\\HMS\\frontend\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,4752)),"C:\\Users\\josep\\Documents\\AarkayTechnoConsultants\\HMS\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\josep\\Documents\\AarkayTechnoConsultants\\HMS\\frontend\\app\\admin\\audit\\page.tsx"],u="/admin/audit/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/audit/page",pathname:"/admin/audit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4292:(e,t,s)=>{Promise.resolve().then(s.bind(s,3521))},558:(e,t,s)=>{Promise.resolve().then(s.bind(s,2802))},3521:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var a=s(326),r=s(7577),n=s(9557),i=s(4863),l=s(6126),o=s(3556),d=s(7574),c=s(1346),u=s(6062),m=s(5430),x=s(7759),p=s(7118),h=s(5495),j=s(9684);let g={list:(e={})=>{let t=new URLSearchParams;e.page&&t.set("page",String(e.page)),e.limit&&t.set("limit",String(e.limit)),e.user_id&&t.set("user_id",e.user_id),e.tenant_id&&t.set("tenant_id",e.tenant_id),e.action&&t.set("action",e.action),e.resource_type&&t.set("resource_type",e.resource_type),e.date_from&&t.set("date_from",e.date_from),e.date_to&&t.set("date_to",e.date_to);let s=t.toString();return(0,j.S)(`/admin/audit?${s}`)}},v={action:"",resource_type:"",user_id:"",tenant_id:"",date_from:"",date_to:""};function y(){let[e,t]=(0,r.useState)([]),[s,j]=(0,r.useState)(v),[y,f]=(0,r.useState)(!0),[_,N]=(0,r.useState)(null),b=(0,r.useCallback)(async e=>{f(!0),N(null);try{let s=await g.list({page:1,limit:50,action:e.action||void 0,resource_type:e.resource_type||void 0,user_id:e.user_id||void 0,tenant_id:e.tenant_id||void 0,date_from:e.date_from||void 0,date_to:e.date_to||void 0});t(s.items)}catch(e){N(e instanceof Error?e.message:"Failed to load audit logs")}finally{f(!1)}},[]),C=(e,t)=>{j(s=>({...s,[e]:t}))},S=(0,r.useMemo)(()=>e.length>0,[e]);return a.jsx(n.n,{permission:"admin:audit:read",fallback:(0,a.jsxs)(m.W,{className:"p-6",children:[a.jsx("h2",{className:"text-2xl",children:"Access denied"}),a.jsx("p",{className:"mt-2 text-sm text-[color:var(--color-text-muted)]",children:"You do not have permission to view audit logs."})]}),children:(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx(i.m,{title:"Audit Logs",description:"Immutable activity trail for platform actions.",count:e.length,countLabel:"Records"}),a.jsx(l.y,{title:"Filters",children:(0,a.jsxs)("form",{className:"grid gap-4 md:grid-cols-3",onSubmit:e=>{e.preventDefault(),b(s)},children:[a.jsx(p.g,{label:"Action",children:a.jsx(h.o,{value:s.action,onChange:e=>C("action",e.target.value),placeholder:"auth.login"})}),a.jsx(p.g,{label:"Resource Type",children:a.jsx(h.o,{value:s.resource_type,onChange:e=>C("resource_type",e.target.value),placeholder:"tenant"})}),a.jsx(p.g,{label:"User ID",children:a.jsx(h.o,{value:s.user_id,onChange:e=>C("user_id",e.target.value),placeholder:"UUID"})}),a.jsx(p.g,{label:"Tenant ID",children:a.jsx(h.o,{value:s.tenant_id,onChange:e=>C("tenant_id",e.target.value),placeholder:"UUID"})}),a.jsx(p.g,{label:"From",children:a.jsx(h.o,{type:"date",value:s.date_from,onChange:e=>C("date_from",e.target.value)})}),a.jsx(p.g,{label:"To",children:a.jsx(h.o,{type:"date",value:s.date_to,onChange:e=>C("date_to",e.target.value)})}),(0,a.jsxs)("div",{className:"md:col-span-3 flex flex-wrap gap-3",children:[a.jsx(x.z,{type:"submit",variant:"primary",children:"Apply Filters"}),a.jsx(x.z,{type:"button",variant:"secondary",onClick:()=>{j(v),b(v)},children:"Reset"})]})]})}),_?a.jsx(u.o,{tone:"error",message:_}):null,y?a.jsx(u.o,{tone:"info",message:"Loading audit logs..."}):S?a.jsx(d.r,{title:"Recent Activity",table:a.jsx(o.w,{columns:[{key:"action",header:"Action",cellClassName:"font-medium",render:e=>e.action},{key:"resource",header:"Resource",cellClassName:"text-[color:var(--color-text-muted)]",render:e=>e.resource_type??"-"},{key:"user",header:"User",cellClassName:"text-[color:var(--color-text-muted)]",render:e=>e.user_id??"-"},{key:"tenant",header:"Tenant",cellClassName:"text-[color:var(--color-text-muted)]",render:e=>e.tenant_id??"-"},{key:"when",header:"When",render:e=>e.created_at?new Date(e.created_at).toLocaleString():"-"}],rows:e,rowKey:e=>e.id})}):a.jsx(c.u,{description:"No audit activity yet."})]})})}},2802:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var a=s(326),r=s(4784),n=s(1072),i=s(9557);function l({children:e}){return a.jsx(i.E,{userType:"admin",children:a.jsx(r.q,{variant:"admin",children:(0,a.jsxs)("div",{className:"min-w-0",children:[a.jsx(n.w,{}),a.jsx("main",{className:"p-6",children:e})]})})})}},4863:(e,t,s)=>{"use strict";s.d(t,{m:()=>i});var a=s(326),r=s(1135),n=s(3118);function i({title:e,description:t,rightSlot:s,count:i,countLabel:l,className:o}){return(0,a.jsxs)("div",{className:(0,r.Z)("ui-page-header",o),children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"ui-page-title",children:e}),t?a.jsx("p",{className:"ui-page-subtitle",children:t}):null]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:["number"==typeof i?(0,a.jsxs)(n.C,{variant:"accent",children:[i,l?` ${l}`:""]}):null,s]})]})}},6126:(e,t,s)=>{"use strict";s.d(t,{y:()=>n});var a=s(326),r=s(4612);function n({title:e,children:t}){return a.jsx(r.q,{title:e,children:t})}},3556:(e,t,s)=>{"use strict";s.d(t,{w:()=>n});var a=s(326),r=s(1135);function n({columns:e,rows:t,rowKey:s,emptyFallback:n=null,className:i}){return 0===t.length?a.jsx(a.Fragment,{children:n}):(0,a.jsxs)("table",{className:(0,r.Z)("ui-table",i),children:[a.jsx("thead",{children:a.jsx("tr",{children:e.map(e=>a.jsx("th",{className:(0,r.Z)("pb-3",e.headerClassName),children:e.header},e.key))})}),a.jsx("tbody",{children:t.map((t,n)=>a.jsx("tr",{children:e.map(e=>a.jsx("td",{className:(0,r.Z)("py-3",e.cellClassName),children:e.render(t,n)},e.key))},s(t,n)))})]})}},7574:(e,t,s)=>{"use strict";s.d(t,{r:()=>i});var a=s(326),r=s(6184),n=s(4612);function i({title:e,table:t,footer:s}){return(0,a.jsxs)(n.q,{title:e,children:[a.jsx(r.K,{children:t}),s?a.jsx("div",{className:"mt-3",children:s}):null]})}},1346:(e,t,s)=>{"use strict";s.d(t,{u:()=>n});var a=s(326),r=s(5430);function n({title:e="Nothing here yet",description:t}){return(0,a.jsxs)(r.W,{className:"p-6",children:[a.jsx("h3",{className:"text-lg",children:e}),a.jsx("p",{className:"mt-2 text-sm text-[color:var(--color-text-muted)]",children:t})]})}},6062:(e,t,s)=>{"use strict";s.d(t,{o:()=>n});var a=s(326),r=s(1135);function n({tone:e="info",message:t,className:s}){return a.jsx("p",{className:(0,r.Z)("ui-inline-alert",`ui-inline-alert-${e}`,s),children:t})}},6184:(e,t,s)=>{"use strict";s.d(t,{K:()=>n});var a=s(326),r=s(1135);function n({children:e,className:t}){return a.jsx("div",{className:(0,r.Z)("ui-table-wrap",t),children:e})}},4612:(e,t,s)=>{"use strict";s.d(t,{q:()=>i});var a=s(326),r=s(1135),n=s(5430);function i({title:e,actions:t,children:s,className:i}){return(0,a.jsxs)(n.W,{className:(0,r.Z)("p-6 ui-reveal",i),children:[(e||t)&&(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e?a.jsx("h3",{className:"text-lg",children:e}):a.jsx("span",{}),t]}),a.jsx("div",{className:(0,r.Z)((e||t)&&"mt-4"),children:s})]})}},5430:(e,t,s)=>{"use strict";s.d(t,{W:()=>n});var a=s(326),r=s(1135);function n({children:e,className:t}){return a.jsx("div",{className:(0,r.Z)("glass-card",t),children:e})}},3118:(e,t,s)=>{"use strict";s.d(t,{C:()=>n});var a=s(326),r=s(1135);function n({variant:e="accent",className:t,children:s,...n}){return a.jsx("span",{className:(0,r.Z)("badge",`badge-${e}`,t),...n,children:s})}},7759:(e,t,s)=>{"use strict";s.d(t,{z:()=>n});var a=s(326),r=s(1135);function n({className:e,variant:t="secondary",size:s="md",children:n,...i}){return a.jsx("button",{className:(0,r.Z)("ui-btn ui-anim",`ui-btn-${t}`,"sm"===s&&"ui-btn-sm","md"===s&&"ui-btn-md","lg"===s&&"ui-btn-lg",e),...i,children:n})}},7118:(e,t,s)=>{"use strict";s.d(t,{g:()=>n});var a=s(326),r=s(1135);function n({label:e,required:t,hint:s,error:n,className:i,children:l}){return(0,a.jsxs)("div",{className:(0,r.Z)("space-y-2",i),children:[(0,a.jsxs)("label",{className:"text-sm",children:[e,t&&a.jsx("span",{className:"ml-1 text-[color:var(--color-accent)]",children:"*"})]}),l,n?a.jsx("p",{className:"text-xs text-red-400",children:n}):s?a.jsx("p",{className:"text-xs text-[color:var(--color-text-muted)]",children:s}):null]})}},5495:(e,t,s)=>{"use strict";s.d(t,{o:()=>n});var a=s(326),r=s(1135);function n({className:e,...t}){return a.jsx("input",{className:(0,r.Z)("ui-input",e),...t})}},3319:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>l});var a=s(8570);let r=(0,a.createProxy)(String.raw`C:\Users\josep\Documents\AarkayTechnoConsultants\HMS\frontend\app\admin\audit\page.tsx`),{__esModule:n,$$typeof:i}=r;r.default;let l=(0,a.createProxy)(String.raw`C:\Users\josep\Documents\AarkayTechnoConsultants\HMS\frontend\app\admin\audit\page.tsx#default`)},596:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>l});var a=s(8570);let r=(0,a.createProxy)(String.raw`C:\Users\josep\Documents\AarkayTechnoConsultants\HMS\frontend\app\admin\layout.tsx`),{__esModule:n,$$typeof:i}=r;r.default;let l=(0,a.createProxy)(String.raw`C:\Users\josep\Documents\AarkayTechnoConsultants\HMS\frontend\app\admin\layout.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[5819,8591,9158],()=>s(9416));module.exports=a})();