(()=>{var e={};e.id=7719,e.ids=[7719],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6842:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c}),s(9494),s(596),s(4752),s(5866);var a=s(3191),n=s(8716),r=s(7922),i=s.n(r),l=s(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["admin",{children:["hotels",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,9494)),"C:\\Users\\josep\\Documents\\AarkayTechnoConsultants\\HMS\\frontend\\app\\admin\\hotels\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,596)),"C:\\Users\\josep\\Documents\\AarkayTechnoConsultants\\HMS\\frontend\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,4752)),"C:\\Users\\josep\\Documents\\AarkayTechnoConsultants\\HMS\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\josep\\Documents\\AarkayTechnoConsultants\\HMS\\frontend\\app\\admin\\hotels\\page.tsx"],u="/admin/hotels/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/admin/hotels/page",pathname:"/admin/hotels",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2945:(e,t,s)=>{Promise.resolve().then(s.bind(s,8477))},558:(e,t,s)=>{Promise.resolve().then(s.bind(s,2802))},8477:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var a=s(326),n=s(7577),r=s(5047),i=s(9557),l=s(4863),o=s(6126),c=s(3556),d=s(7574),u=s(1346),m=s(6062),h=s(4381),x=s(5430),p=s(7759),g=s(7118),j=s(5495),v=s(1852),f=s(7773);let y={name:"",slug:"",status:"active",subscription_tier:""};function b(){let e=(0,r.useRouter)(),{startImpersonation:t}=(0,f.a)(),[s,b]=(0,n.useState)([]),[N,C]=(0,n.useState)(!0),[S,w]=(0,n.useState)(y),[_,k]=(0,n.useState)(null),[P,q]=(0,n.useState)(null),[T,A]=(0,n.useState)(null),H=(0,n.useCallback)(async()=>{C(!0),A(null);try{let e=await v.B.list(1,50);b(e.items)}catch(e){A(e instanceof Error?e.message:"Failed to load hotels")}finally{C(!1)}},[]),M=(e,t)=>{w(s=>({...s,[e]:t}))},$=()=>{w(y),k(null)},E=(0,n.useMemo)(()=>({name:S.name,slug:S.slug||void 0,status:S.status||void 0,subscription_tier:S.subscription_tier||void 0}),[S]),Z=async e=>{e.preventDefault(),A(null);try{_?await v.B.update(_.id,E):await v.B.create(E),$(),await H()}catch(e){A(e instanceof Error?e.message:"Failed to save hotel")}},D=e=>{k(e),w({name:e.name,slug:e.slug,status:e.status,subscription_tier:e.subscription_tier??""})},z=async e=>{if(confirm(`Delete ${e.name}? This cannot be undone.`))try{await v.B.remove(e.id),await H()}catch(e){A(e instanceof Error?e.message:"Failed to delete hotel")}},U=async s=>{if(confirm(`Start impersonation for ${s.name}?`)){A(null),q(s.id);try{await t({tenant_id:s.id}),e.push("/hotel/dashboard")}catch(e){A(e instanceof Error?e.message:"Failed to start impersonation"),q(null)}}};return a.jsx(i.n,{permission:"admin:hotels:read",fallback:(0,a.jsxs)(x.W,{className:"p-6",children:[a.jsx("h2",{className:"text-2xl",children:"Access denied"}),a.jsx("p",{className:"mt-2 text-sm text-[color:var(--color-text-muted)]",children:"You do not have permission to view the hotel registry."})]}),children:(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx(l.m,{title:"Hotel Registry",description:"Manage tenants and onboard new hotels to the platform.",count:s.length,countLabel:"Hotels"}),a.jsx(i.n,{permission:_?"admin:hotels:update":"admin:hotels:create",children:a.jsx(o.y,{title:_?"Edit Hotel":"Add Hotel",children:(0,a.jsxs)("form",{className:"grid gap-4 md:grid-cols-2",onSubmit:Z,children:[a.jsx(g.g,{label:"Hotel Name",required:!0,children:a.jsx(j.o,{value:S.name,onChange:e=>M("name",e.target.value),placeholder:"Oceanview Suites"})}),a.jsx(g.g,{label:"Slug",children:a.jsx(j.o,{value:S.slug,onChange:e=>M("slug",e.target.value),placeholder:"oceanview-suites"})}),a.jsx(g.g,{label:"Status",children:a.jsx(j.o,{value:S.status,onChange:e=>M("status",e.target.value),placeholder:"active"})}),a.jsx(g.g,{label:"Subscription Tier",children:a.jsx(j.o,{value:S.subscription_tier,onChange:e=>M("subscription_tier",e.target.value),placeholder:"premium"})}),(0,a.jsxs)("div",{className:"md:col-span-2 flex flex-wrap gap-3",children:[a.jsx(p.z,{type:"submit",variant:"primary",children:_?"Save Changes":"Create Hotel"}),_?a.jsx(p.z,{type:"button",variant:"secondary",onClick:$,children:"Cancel"}):null]})]})})}),T?a.jsx(m.o,{tone:"error",message:T}):null,N?a.jsx(m.o,{tone:"info",message:"Loading hotels..."}):0===s.length?a.jsx(u.u,{description:"No hotels created yet."}):a.jsx(d.r,{title:"Hotel Directory",table:a.jsx(c.w,{columns:[{key:"name",header:"Name",cellClassName:"font-medium",render:e=>e.name},{key:"slug",header:"Slug",cellClassName:"text-[color:var(--color-text-muted)]",render:e=>e.slug},{key:"status",header:"Status",render:e=>e.status},{key:"tier",header:"Tier",render:e=>e.subscription_tier??"-"},{key:"actions",header:"Actions",render:e=>(0,a.jsxs)(h.l,{children:[a.jsx(i.n,{permission:"admin:hotels:update",children:a.jsx(p.z,{size:"sm",variant:"outline",onClick:()=>D(e),children:"Edit"})}),a.jsx(i.n,{permission:"admin:hotels:delete",children:a.jsx(p.z,{size:"sm",variant:"danger",onClick:()=>void z(e),children:"Delete"})}),a.jsx(i.n,{permission:"admin:impersonation:start",children:a.jsx(p.z,{size:"sm",variant:"secondary",onClick:()=>void U(e),disabled:P===e.id,children:P===e.id?"Starting...":"Impersonate"})})]})}],rows:s,rowKey:e=>e.id})})]})})}},2802:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var a=s(326),n=s(4784),r=s(1072),i=s(9557);function l({children:e}){return a.jsx(i.E,{userType:"admin",children:a.jsx(n.q,{variant:"admin",children:(0,a.jsxs)("div",{className:"min-w-0",children:[a.jsx(r.w,{}),a.jsx("main",{className:"p-6",children:e})]})})})}},4863:(e,t,s)=>{"use strict";s.d(t,{m:()=>i});var a=s(326),n=s(1135),r=s(3118);function i({title:e,description:t,rightSlot:s,count:i,countLabel:l,className:o}){return(0,a.jsxs)("div",{className:(0,n.Z)("ui-page-header",o),children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"ui-page-title",children:e}),t?a.jsx("p",{className:"ui-page-subtitle",children:t}):null]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:["number"==typeof i?(0,a.jsxs)(r.C,{variant:"accent",children:[i,l?` ${l}`:""]}):null,s]})]})}},6126:(e,t,s)=>{"use strict";s.d(t,{y:()=>r});var a=s(326),n=s(4612);function r({title:e,children:t}){return a.jsx(n.q,{title:e,children:t})}},3556:(e,t,s)=>{"use strict";s.d(t,{w:()=>r});var a=s(326),n=s(1135);function r({columns:e,rows:t,rowKey:s,emptyFallback:r=null,className:i}){return 0===t.length?a.jsx(a.Fragment,{children:r}):(0,a.jsxs)("table",{className:(0,n.Z)("ui-table",i),children:[a.jsx("thead",{children:a.jsx("tr",{children:e.map(e=>a.jsx("th",{className:(0,n.Z)("pb-3",e.headerClassName),children:e.header},e.key))})}),a.jsx("tbody",{children:t.map((t,r)=>a.jsx("tr",{children:e.map(e=>a.jsx("td",{className:(0,n.Z)("py-3",e.cellClassName),children:e.render(t,r)},e.key))},s(t,r)))})]})}},7574:(e,t,s)=>{"use strict";s.d(t,{r:()=>i});var a=s(326),n=s(6184),r=s(4612);function i({title:e,table:t,footer:s}){return(0,a.jsxs)(r.q,{title:e,children:[a.jsx(n.K,{children:t}),s?a.jsx("div",{className:"mt-3",children:s}):null]})}},1346:(e,t,s)=>{"use strict";s.d(t,{u:()=>r});var a=s(326),n=s(5430);function r({title:e="Nothing here yet",description:t}){return(0,a.jsxs)(n.W,{className:"p-6",children:[a.jsx("h3",{className:"text-lg",children:e}),a.jsx("p",{className:"mt-2 text-sm text-[color:var(--color-text-muted)]",children:t})]})}},6062:(e,t,s)=>{"use strict";s.d(t,{o:()=>r});var a=s(326),n=s(1135);function r({tone:e="info",message:t,className:s}){return a.jsx("p",{className:(0,n.Z)("ui-inline-alert",`ui-inline-alert-${e}`,s),children:t})}},6184:(e,t,s)=>{"use strict";s.d(t,{K:()=>r});var a=s(326),n=s(1135);function r({children:e,className:t}){return a.jsx("div",{className:(0,n.Z)("ui-table-wrap",t),children:e})}},4612:(e,t,s)=>{"use strict";s.d(t,{q:()=>i});var a=s(326),n=s(1135),r=s(5430);function i({title:e,actions:t,children:s,className:i}){return(0,a.jsxs)(r.W,{className:(0,n.Z)("p-6 ui-reveal",i),children:[(e||t)&&(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e?a.jsx("h3",{className:"text-lg",children:e}):a.jsx("span",{}),t]}),a.jsx("div",{className:(0,n.Z)((e||t)&&"mt-4"),children:s})]})}},4381:(e,t,s)=>{"use strict";s.d(t,{l:()=>r});var a=s(326),n=s(1135);function r({children:e,className:t}){return a.jsx("div",{className:(0,n.Z)("flex flex-wrap gap-2",t),children:e})}},5430:(e,t,s)=>{"use strict";s.d(t,{W:()=>r});var a=s(326),n=s(1135);function r({children:e,className:t}){return a.jsx("div",{className:(0,n.Z)("glass-card",t),children:e})}},3118:(e,t,s)=>{"use strict";s.d(t,{C:()=>r});var a=s(326),n=s(1135);function r({variant:e="accent",className:t,children:s,...r}){return a.jsx("span",{className:(0,n.Z)("badge",`badge-${e}`,t),...r,children:s})}},7759:(e,t,s)=>{"use strict";s.d(t,{z:()=>r});var a=s(326),n=s(1135);function r({className:e,variant:t="secondary",size:s="md",children:r,...i}){return a.jsx("button",{className:(0,n.Z)("ui-btn ui-anim",`ui-btn-${t}`,"sm"===s&&"ui-btn-sm","md"===s&&"ui-btn-md","lg"===s&&"ui-btn-lg",e),...i,children:r})}},7118:(e,t,s)=>{"use strict";s.d(t,{g:()=>r});var a=s(326),n=s(1135);function r({label:e,required:t,hint:s,error:r,className:i,children:l}){return(0,a.jsxs)("div",{className:(0,n.Z)("space-y-2",i),children:[(0,a.jsxs)("label",{className:"text-sm",children:[e,t&&a.jsx("span",{className:"ml-1 text-[color:var(--color-accent)]",children:"*"})]}),l,r?a.jsx("p",{className:"text-xs text-red-400",children:r}):s?a.jsx("p",{className:"text-xs text-[color:var(--color-text-muted)]",children:s}):null]})}},5495:(e,t,s)=>{"use strict";s.d(t,{o:()=>r});var a=s(326),n=s(1135);function r({className:e,...t}){return a.jsx("input",{className:(0,n.Z)("ui-input",e),...t})}},1852:(e,t,s)=>{"use strict";s.d(t,{B:()=>n});var a=s(9684);let n={list:(e=1,t=20)=>(0,a.S)(`/admin/hotels?page=${e}&limit=${t}`),get:e=>(0,a.S)(`/admin/hotels/${e}`),create:e=>(0,a.S)("/admin/hotels",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>(0,a.S)(`/admin/hotels/${e}`,{method:"PUT",body:JSON.stringify(t)}),remove:e=>(0,a.S)(`/admin/hotels/${e}`,{method:"DELETE"})}},9494:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>r,default:()=>l});var a=s(8570);let n=(0,a.createProxy)(String.raw`C:\Users\josep\Documents\AarkayTechnoConsultants\HMS\frontend\app\admin\hotels\page.tsx`),{__esModule:r,$$typeof:i}=n;n.default;let l=(0,a.createProxy)(String.raw`C:\Users\josep\Documents\AarkayTechnoConsultants\HMS\frontend\app\admin\hotels\page.tsx#default`)},596:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>r,default:()=>l});var a=s(8570);let n=(0,a.createProxy)(String.raw`C:\Users\josep\Documents\AarkayTechnoConsultants\HMS\frontend\app\admin\layout.tsx`),{__esModule:r,$$typeof:i}=n;n.default;let l=(0,a.createProxy)(String.raw`C:\Users\josep\Documents\AarkayTechnoConsultants\HMS\frontend\app\admin\layout.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[5819,8591,9158],()=>s(6842));module.exports=a})();