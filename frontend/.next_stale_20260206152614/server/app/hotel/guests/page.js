(()=>{var e={};e.id=9018,e.ids=[9018],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5726:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>h,originalPathname:()=>d,pages:()=>u,routeModule:()=>m,tree:()=>o}),s(2781),s(5453),s(4752),s(5866);var a=s(3191),n=s(8716),r=s(7922),l=s.n(r),i=s(5231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);s.d(t,c);let o=["",{children:["hotel",{children:["guests",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2781)),"C:\\Users\\josep\\Documents\\AarkayTechnoConsultants\\HMS\\frontend\\app\\hotel\\guests\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,5453)),"C:\\Users\\josep\\Documents\\AarkayTechnoConsultants\\HMS\\frontend\\app\\hotel\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,4752)),"C:\\Users\\josep\\Documents\\AarkayTechnoConsultants\\HMS\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],u=["C:\\Users\\josep\\Documents\\AarkayTechnoConsultants\\HMS\\frontend\\app\\hotel\\guests\\page.tsx"],d="/hotel/guests/page",h={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/hotel/guests/page",pathname:"/hotel/guests",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},8096:(e,t,s)=>{Promise.resolve().then(s.bind(s,4687))},5206:(e,t,s)=>{Promise.resolve().then(s.bind(s,3174))},4687:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var a=s(326),n=s(7577),r=s(9557),l=s(4863),i=s(6126),c=s(3556),o=s(7574),u=s(1346),d=s(6062),h=s(5481),m=s(4381),x=s(5430),p=s(7759),g=s(7118),j=s(5495),v=s(4909),_=s(9684);let f={list:e=>{let t=new URLSearchParams;e?.page&&t.set("page",e.page.toString()),e?.limit&&t.set("limit",e.limit.toString()),e?.search&&t.set("search",e.search);let s=t.toString();return(0,_.S)(`/hotel/guests${s?`?${s}`:""}`)},create:e=>(0,_.S)("/hotel/guests",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>(0,_.S)(`/hotel/guests/${e}`,{method:"PUT",body:JSON.stringify(t)}),remove:e=>(0,_.S)(`/hotel/guests/${e}`,{method:"DELETE"})},y={first_name:"",last_name:"",email:"",phone:"",status:"active",check_in_at:"",check_out_at:"",notes:""},k=e=>{if(!e)return;let t=new Date(e);return isNaN(t.getTime())?void 0:t.toISOString()},N=e=>e?e.slice(0,10):"";function b(){let[e,t]=(0,n.useState)([]),[s,_]=(0,n.useState)(!0),[b,C]=(0,n.useState)(y),[S,w]=(0,n.useState)(null),[P,D]=(0,n.useState)(null),[q,T]=(0,n.useState)(""),$=(0,n.useCallback)(async(e="")=>{_(!0),D(null);try{let s=await f.list({page:1,limit:50,search:e||void 0});t(s.items)}catch(e){D(e instanceof Error?e.message:"Failed to load guests")}finally{_(!1)}},[]),A=(e,t)=>{C(s=>({...s,[e]:t}))},E=()=>{C(y),w(null)},M=(0,n.useMemo)(()=>({first_name:b.first_name,last_name:b.last_name,email:b.email||void 0,phone:b.phone||void 0,status:b.status||void 0,check_in_at:k(b.check_in_at),check_out_at:k(b.check_out_at),notes:b.notes||void 0}),[b]),Z=(0,n.useMemo)(()=>({first_name:b.first_name||void 0,last_name:b.last_name||void 0,email:b.email||void 0,phone:b.phone||void 0,status:b.status||void 0,check_in_at:k(b.check_in_at),check_out_at:k(b.check_out_at),notes:b.notes||void 0}),[b]),G=async e=>{e.preventDefault(),D(null);try{S?await f.update(S.id,Z):await f.create(M),E(),await $(q)}catch(e){D(e instanceof Error?e.message:"Failed to save guest")}},U=e=>{w(e),C({first_name:e.first_name,last_name:e.last_name,email:e.email??"",phone:e.phone??"",status:e.status,check_in_at:N(e.check_in_at),check_out_at:N(e.check_out_at),notes:e.notes??""})},z=async e=>{if(confirm(`Delete ${e.first_name} ${e.last_name}? This cannot be undone.`))try{await f.remove(e.id),await $(q)}catch(e){D(e instanceof Error?e.message:"Failed to delete guest")}};return a.jsx(r.n,{permission:"hotel:guests:read",fallback:(0,a.jsxs)(x.W,{className:"p-6",children:[a.jsx("h2",{className:"text-2xl",children:"Access denied"}),a.jsx("p",{className:"mt-2 text-sm text-[color:var(--color-text-muted)]",children:"You do not have permission to view the guest registry."})]}),children:(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx(l.m,{title:"Guest Registry",description:"Track active and upcoming guests for your property.",count:e.length,countLabel:"Guests"}),a.jsx(i.y,{title:"Search Guests",children:(0,a.jsxs)(h.B,{children:[a.jsx(j.o,{value:q,onChange:e=>T(e.target.value),className:"md:w-80",placeholder:"Search by name or email"}),a.jsx(p.z,{variant:"secondary",onClick:()=>void $(q),children:"Search"})]})}),a.jsx(r.n,{permission:S?"hotel:guests:update":"hotel:guests:create",children:a.jsx(i.y,{title:S?"Edit Guest":"Add Guest",children:(0,a.jsxs)("form",{className:"grid gap-4 md:grid-cols-2",onSubmit:G,children:[a.jsx(g.g,{label:"First Name",required:!0,children:a.jsx(j.o,{value:b.first_name,onChange:e=>A("first_name",e.target.value)})}),a.jsx(g.g,{label:"Last Name",required:!0,children:a.jsx(j.o,{value:b.last_name,onChange:e=>A("last_name",e.target.value)})}),a.jsx(g.g,{label:"Email",children:a.jsx(j.o,{value:b.email,onChange:e=>A("email",e.target.value),placeholder:"guest@example.com"})}),a.jsx(g.g,{label:"Phone",children:a.jsx(j.o,{value:b.phone,onChange:e=>A("phone",e.target.value),placeholder:"+1 555 123 4567"})}),a.jsx(g.g,{label:"Status",children:a.jsx(j.o,{value:b.status,onChange:e=>A("status",e.target.value)})}),a.jsx(g.g,{label:"Check In",children:a.jsx(j.o,{type:"date",value:b.check_in_at,onChange:e=>A("check_in_at",e.target.value)})}),a.jsx(g.g,{label:"Check Out",children:a.jsx(j.o,{type:"date",value:b.check_out_at,onChange:e=>A("check_out_at",e.target.value)})}),a.jsx(g.g,{label:"Notes",className:"md:col-span-2",children:a.jsx(v.F,{value:b.notes,onChange:e=>A("notes",e.target.value),rows:3})}),(0,a.jsxs)("div",{className:"md:col-span-2 flex flex-wrap gap-3",children:[a.jsx(p.z,{type:"submit",variant:"primary",children:S?"Save Changes":"Create Guest"}),S?a.jsx(p.z,{type:"button",variant:"secondary",onClick:E,children:"Cancel"}):null]})]})})}),P?a.jsx(d.o,{tone:"error",message:P}):null,s?a.jsx(d.o,{tone:"info",message:"Loading guests..."}):0===e.length?a.jsx(u.u,{description:"No guests added yet."}):a.jsx(o.r,{title:"Guest Directory",table:a.jsx(c.w,{columns:[{key:"guest",header:"Guest",cellClassName:"font-medium",render:e=>`${e.first_name} ${e.last_name}`},{key:"email",header:"Email",cellClassName:"text-[color:var(--color-text-muted)]",render:e=>e.email??"-"},{key:"status",header:"Status",render:e=>e.status},{key:"check_in",header:"Check In",render:e=>e.check_in_at?new Date(e.check_in_at).toLocaleDateString():"-"},{key:"check_out",header:"Check Out",render:e=>e.check_out_at?new Date(e.check_out_at).toLocaleDateString():"-"},{key:"actions",header:"Actions",render:e=>(0,a.jsxs)(m.l,{children:[a.jsx(r.n,{permission:"hotel:guests:update",children:a.jsx(p.z,{size:"sm",variant:"outline",onClick:()=>U(e),children:"Edit"})}),a.jsx(r.n,{permission:"hotel:guests:delete",children:a.jsx(p.z,{size:"sm",variant:"danger",onClick:()=>void z(e),children:"Delete"})})]})}],rows:e,rowKey:e=>e.id})})]})})}},3174:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var a=s(326),n=s(4784),r=s(1072),l=s(9557);function i({children:e}){return a.jsx(l.E,{userType:"hotel",children:a.jsx(n.q,{variant:"hotel",children:(0,a.jsxs)("div",{className:"min-w-0",children:[a.jsx(r.w,{}),a.jsx("main",{className:"p-6",children:e})]})})})}},4863:(e,t,s)=>{"use strict";s.d(t,{m:()=>l});var a=s(326),n=s(1135),r=s(3118);function l({title:e,description:t,rightSlot:s,count:l,countLabel:i,className:c}){return(0,a.jsxs)("div",{className:(0,n.Z)("ui-page-header",c),children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"ui-page-title",children:e}),t?a.jsx("p",{className:"ui-page-subtitle",children:t}):null]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:["number"==typeof l?(0,a.jsxs)(r.C,{variant:"accent",children:[l,i?` ${i}`:""]}):null,s]})]})}},6126:(e,t,s)=>{"use strict";s.d(t,{y:()=>r});var a=s(326),n=s(4612);function r({title:e,children:t}){return a.jsx(n.q,{title:e,children:t})}},3556:(e,t,s)=>{"use strict";s.d(t,{w:()=>r});var a=s(326),n=s(1135);function r({columns:e,rows:t,rowKey:s,emptyFallback:r=null,className:l}){return 0===t.length?a.jsx(a.Fragment,{children:r}):(0,a.jsxs)("table",{className:(0,n.Z)("ui-table",l),children:[a.jsx("thead",{children:a.jsx("tr",{children:e.map(e=>a.jsx("th",{className:(0,n.Z)("pb-3",e.headerClassName),children:e.header},e.key))})}),a.jsx("tbody",{children:t.map((t,r)=>a.jsx("tr",{children:e.map(e=>a.jsx("td",{className:(0,n.Z)("py-3",e.cellClassName),children:e.render(t,r)},e.key))},s(t,r)))})]})}},7574:(e,t,s)=>{"use strict";s.d(t,{r:()=>l});var a=s(326),n=s(6184),r=s(4612);function l({title:e,table:t,footer:s}){return(0,a.jsxs)(r.q,{title:e,children:[a.jsx(n.K,{children:t}),s?a.jsx("div",{className:"mt-3",children:s}):null]})}},1346:(e,t,s)=>{"use strict";s.d(t,{u:()=>r});var a=s(326),n=s(5430);function r({title:e="Nothing here yet",description:t}){return(0,a.jsxs)(n.W,{className:"p-6",children:[a.jsx("h3",{className:"text-lg",children:e}),a.jsx("p",{className:"mt-2 text-sm text-[color:var(--color-text-muted)]",children:t})]})}},6062:(e,t,s)=>{"use strict";s.d(t,{o:()=>r});var a=s(326),n=s(1135);function r({tone:e="info",message:t,className:s}){return a.jsx("p",{className:(0,n.Z)("ui-inline-alert",`ui-inline-alert-${e}`,s),children:t})}},6184:(e,t,s)=>{"use strict";s.d(t,{K:()=>r});var a=s(326),n=s(1135);function r({children:e,className:t}){return a.jsx("div",{className:(0,n.Z)("ui-table-wrap",t),children:e})}},5481:(e,t,s)=>{"use strict";s.d(t,{B:()=>n});var a=s(326);function n({children:e}){return a.jsx("div",{className:"flex flex-wrap gap-3",children:e})}},4612:(e,t,s)=>{"use strict";s.d(t,{q:()=>l});var a=s(326),n=s(1135),r=s(5430);function l({title:e,actions:t,children:s,className:l}){return(0,a.jsxs)(r.W,{className:(0,n.Z)("p-6 ui-reveal",l),children:[(e||t)&&(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e?a.jsx("h3",{className:"text-lg",children:e}):a.jsx("span",{}),t]}),a.jsx("div",{className:(0,n.Z)((e||t)&&"mt-4"),children:s})]})}},4381:(e,t,s)=>{"use strict";s.d(t,{l:()=>r});var a=s(326),n=s(1135);function r({children:e,className:t}){return a.jsx("div",{className:(0,n.Z)("flex flex-wrap gap-2",t),children:e})}},5430:(e,t,s)=>{"use strict";s.d(t,{W:()=>r});var a=s(326),n=s(1135);function r({children:e,className:t}){return a.jsx("div",{className:(0,n.Z)("glass-card",t),children:e})}},3118:(e,t,s)=>{"use strict";s.d(t,{C:()=>r});var a=s(326),n=s(1135);function r({variant:e="accent",className:t,children:s,...r}){return a.jsx("span",{className:(0,n.Z)("badge",`badge-${e}`,t),...r,children:s})}},7759:(e,t,s)=>{"use strict";s.d(t,{z:()=>r});var a=s(326),n=s(1135);function r({className:e,variant:t="secondary",size:s="md",children:r,...l}){return a.jsx("button",{className:(0,n.Z)("ui-btn ui-anim",`ui-btn-${t}`,"sm"===s&&"ui-btn-sm","md"===s&&"ui-btn-md","lg"===s&&"ui-btn-lg",e),...l,children:r})}},7118:(e,t,s)=>{"use strict";s.d(t,{g:()=>r});var a=s(326),n=s(1135);function r({label:e,required:t,hint:s,error:r,className:l,children:i}){return(0,a.jsxs)("div",{className:(0,n.Z)("space-y-2",l),children:[(0,a.jsxs)("label",{className:"text-sm",children:[e,t&&a.jsx("span",{className:"ml-1 text-[color:var(--color-accent)]",children:"*"})]}),i,r?a.jsx("p",{className:"text-xs text-red-400",children:r}):s?a.jsx("p",{className:"text-xs text-[color:var(--color-text-muted)]",children:s}):null]})}},5495:(e,t,s)=>{"use strict";s.d(t,{o:()=>r});var a=s(326),n=s(1135);function r({className:e,...t}){return a.jsx("input",{className:(0,n.Z)("ui-input",e),...t})}},4909:(e,t,s)=>{"use strict";s.d(t,{F:()=>r});var a=s(326),n=s(1135);function r({className:e,...t}){return a.jsx("textarea",{className:(0,n.Z)("ui-textarea",e),...t})}},2781:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>r,default:()=>i});var a=s(8570);let n=(0,a.createProxy)(String.raw`C:\Users\josep\Documents\AarkayTechnoConsultants\HMS\frontend\app\hotel\guests\page.tsx`),{__esModule:r,$$typeof:l}=n;n.default;let i=(0,a.createProxy)(String.raw`C:\Users\josep\Documents\AarkayTechnoConsultants\HMS\frontend\app\hotel\guests\page.tsx#default`)},5453:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>r,default:()=>i});var a=s(8570);let n=(0,a.createProxy)(String.raw`C:\Users\josep\Documents\AarkayTechnoConsultants\HMS\frontend\app\hotel\layout.tsx`),{__esModule:r,$$typeof:l}=n;n.default;let i=(0,a.createProxy)(String.raw`C:\Users\josep\Documents\AarkayTechnoConsultants\HMS\frontend\app\hotel\layout.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[5819,8591,9158],()=>s(5726));module.exports=a})();