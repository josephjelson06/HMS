(()=>{var e={};e.id=5118,e.ids=[5118],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6226:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),s(2286),s(5453),s(4752),s(5866);var r=s(3191),a=s(8716),n=s(7922),l=s.n(n),i=s(5231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let c=["",{children:["hotel",{children:["audit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2286)),"C:\\Users\\josep\\Documents\\AarkayTechnoConsultants\\HMS\\frontend\\app\\hotel\\audit\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,5453)),"C:\\Users\\josep\\Documents\\AarkayTechnoConsultants\\HMS\\frontend\\app\\hotel\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,4752)),"C:\\Users\\josep\\Documents\\AarkayTechnoConsultants\\HMS\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\josep\\Documents\\AarkayTechnoConsultants\\HMS\\frontend\\app\\hotel\\audit\\page.tsx"],u="/hotel/audit/page",x={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/hotel/audit/page",pathname:"/hotel/audit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},8718:(e,t,s)=>{Promise.resolve().then(s.bind(s,9086))},5206:(e,t,s)=>{Promise.resolve().then(s.bind(s,3174))},9086:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var r=s(326),a=s(7577),n=s(9557),l=s(4863),i=s(6126),o=s(3556),c=s(7574),d=s(1346),u=s(6062),x=s(5430),m=s(7759),h=s(7118),p=s(5495),j=s(9684);let g={list:(e={})=>{let t=new URLSearchParams;e.page&&t.set("page",String(e.page)),e.limit&&t.set("limit",String(e.limit)),e.user_id&&t.set("user_id",e.user_id),e.action&&t.set("action",e.action),e.date_from&&t.set("date_from",e.date_from),e.date_to&&t.set("date_to",e.date_to);let s=t.toString();return(0,j.S)(`/hotel/audit?${s}`)}},v={action:"",user_id:"",date_from:"",date_to:""};function f(){let[e,t]=(0,a.useState)([]),[s,j]=(0,a.useState)(v),[f,y]=(0,a.useState)(!0),[_,N]=(0,a.useState)(null),b=(0,a.useCallback)(async e=>{y(!0),N(null);try{let s=await g.list({page:1,limit:50,action:e.action||void 0,user_id:e.user_id||void 0,date_from:e.date_from||void 0,date_to:e.date_to||void 0});t(s.items)}catch(e){N(e instanceof Error?e.message:"Failed to load audit logs")}finally{y(!1)}},[]),C=(e,t)=>{j(s=>({...s,[e]:t}))},S=(0,a.useMemo)(()=>e.length>0,[e]);return r.jsx(n.n,{permission:"hotel:audit:read",fallback:(0,r.jsxs)(x.W,{className:"p-6",children:[r.jsx("h2",{className:"text-2xl",children:"Access denied"}),r.jsx("p",{className:"mt-2 text-sm text-[color:var(--color-text-muted)]",children:"You do not have permission to view audit logs."})]}),children:(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx(l.m,{title:"Audit Logs",description:"Activity trail for your hotel operations.",count:e.length,countLabel:"Records"}),r.jsx(i.y,{title:"Filters",children:(0,r.jsxs)("form",{className:"grid gap-4 md:grid-cols-3",onSubmit:e=>{e.preventDefault(),b(s)},children:[r.jsx(h.g,{label:"Action",children:r.jsx(p.o,{value:s.action,onChange:e=>C("action",e.target.value),placeholder:"guest.created"})}),r.jsx(h.g,{label:"User ID",children:r.jsx(p.o,{value:s.user_id,onChange:e=>C("user_id",e.target.value),placeholder:"UUID"})}),r.jsx(h.g,{label:"From",children:r.jsx(p.o,{type:"date",value:s.date_from,onChange:e=>C("date_from",e.target.value)})}),r.jsx(h.g,{label:"To",children:r.jsx(p.o,{type:"date",value:s.date_to,onChange:e=>C("date_to",e.target.value)})}),(0,r.jsxs)("div",{className:"md:col-span-3 flex flex-wrap gap-3",children:[r.jsx(m.z,{type:"submit",variant:"primary",children:"Apply Filters"}),r.jsx(m.z,{type:"button",variant:"secondary",onClick:()=>{j(v),b(v)},children:"Reset"})]})]})}),_?r.jsx(u.o,{tone:"error",message:_}):null,f?r.jsx(u.o,{tone:"info",message:"Loading audit logs..."}):S?r.jsx(c.r,{title:"Recent Activity",table:r.jsx(o.w,{columns:[{key:"action",header:"Action",cellClassName:"font-medium",render:e=>e.action},{key:"resource",header:"Resource",cellClassName:"text-[color:var(--color-text-muted)]",render:e=>e.resource_type??"-"},{key:"user",header:"User",cellClassName:"text-[color:var(--color-text-muted)]",render:e=>e.user_id??"-"},{key:"when",header:"When",render:e=>e.created_at?new Date(e.created_at).toLocaleString():"-"}],rows:e,rowKey:e=>e.id})}):r.jsx(d.u,{description:"No audit activity yet."})]})})}},3174:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(326),a=s(4784),n=s(1072),l=s(9557);function i({children:e}){return r.jsx(l.E,{userType:"hotel",children:r.jsx(a.q,{variant:"hotel",children:(0,r.jsxs)("div",{className:"min-w-0",children:[r.jsx(n.w,{}),r.jsx("main",{className:"p-6",children:e})]})})})}},4863:(e,t,s)=>{"use strict";s.d(t,{m:()=>l});var r=s(326),a=s(1135),n=s(3118);function l({title:e,description:t,rightSlot:s,count:l,countLabel:i,className:o}){return(0,r.jsxs)("div",{className:(0,a.Z)("ui-page-header",o),children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"ui-page-title",children:e}),t?r.jsx("p",{className:"ui-page-subtitle",children:t}):null]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:["number"==typeof l?(0,r.jsxs)(n.C,{variant:"accent",children:[l,i?` ${i}`:""]}):null,s]})]})}},6126:(e,t,s)=>{"use strict";s.d(t,{y:()=>n});var r=s(326),a=s(4612);function n({title:e,children:t}){return r.jsx(a.q,{title:e,children:t})}},3556:(e,t,s)=>{"use strict";s.d(t,{w:()=>n});var r=s(326),a=s(1135);function n({columns:e,rows:t,rowKey:s,emptyFallback:n=null,className:l}){return 0===t.length?r.jsx(r.Fragment,{children:n}):(0,r.jsxs)("table",{className:(0,a.Z)("ui-table",l),children:[r.jsx("thead",{children:r.jsx("tr",{children:e.map(e=>r.jsx("th",{className:(0,a.Z)("pb-3",e.headerClassName),children:e.header},e.key))})}),r.jsx("tbody",{children:t.map((t,n)=>r.jsx("tr",{children:e.map(e=>r.jsx("td",{className:(0,a.Z)("py-3",e.cellClassName),children:e.render(t,n)},e.key))},s(t,n)))})]})}},7574:(e,t,s)=>{"use strict";s.d(t,{r:()=>l});var r=s(326),a=s(6184),n=s(4612);function l({title:e,table:t,footer:s}){return(0,r.jsxs)(n.q,{title:e,children:[r.jsx(a.K,{children:t}),s?r.jsx("div",{className:"mt-3",children:s}):null]})}},1346:(e,t,s)=>{"use strict";s.d(t,{u:()=>n});var r=s(326),a=s(5430);function n({title:e="Nothing here yet",description:t}){return(0,r.jsxs)(a.W,{className:"p-6",children:[r.jsx("h3",{className:"text-lg",children:e}),r.jsx("p",{className:"mt-2 text-sm text-[color:var(--color-text-muted)]",children:t})]})}},6062:(e,t,s)=>{"use strict";s.d(t,{o:()=>n});var r=s(326),a=s(1135);function n({tone:e="info",message:t,className:s}){return r.jsx("p",{className:(0,a.Z)("ui-inline-alert",`ui-inline-alert-${e}`,s),children:t})}},6184:(e,t,s)=>{"use strict";s.d(t,{K:()=>n});var r=s(326),a=s(1135);function n({children:e,className:t}){return r.jsx("div",{className:(0,a.Z)("ui-table-wrap",t),children:e})}},4612:(e,t,s)=>{"use strict";s.d(t,{q:()=>l});var r=s(326),a=s(1135),n=s(5430);function l({title:e,actions:t,children:s,className:l}){return(0,r.jsxs)(n.W,{className:(0,a.Z)("p-6 ui-reveal",l),children:[(e||t)&&(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e?r.jsx("h3",{className:"text-lg",children:e}):r.jsx("span",{}),t]}),r.jsx("div",{className:(0,a.Z)((e||t)&&"mt-4"),children:s})]})}},5430:(e,t,s)=>{"use strict";s.d(t,{W:()=>n});var r=s(326),a=s(1135);function n({children:e,className:t}){return r.jsx("div",{className:(0,a.Z)("glass-card",t),children:e})}},3118:(e,t,s)=>{"use strict";s.d(t,{C:()=>n});var r=s(326),a=s(1135);function n({variant:e="accent",className:t,children:s,...n}){return r.jsx("span",{className:(0,a.Z)("badge",`badge-${e}`,t),...n,children:s})}},7759:(e,t,s)=>{"use strict";s.d(t,{z:()=>n});var r=s(326),a=s(1135);function n({className:e,variant:t="secondary",size:s="md",children:n,...l}){return r.jsx("button",{className:(0,a.Z)("ui-btn ui-anim",`ui-btn-${t}`,"sm"===s&&"ui-btn-sm","md"===s&&"ui-btn-md","lg"===s&&"ui-btn-lg",e),...l,children:n})}},7118:(e,t,s)=>{"use strict";s.d(t,{g:()=>n});var r=s(326),a=s(1135);function n({label:e,required:t,hint:s,error:n,className:l,children:i}){return(0,r.jsxs)("div",{className:(0,a.Z)("space-y-2",l),children:[(0,r.jsxs)("label",{className:"text-sm",children:[e,t&&r.jsx("span",{className:"ml-1 text-[color:var(--color-accent)]",children:"*"})]}),i,n?r.jsx("p",{className:"text-xs text-red-400",children:n}):s?r.jsx("p",{className:"text-xs text-[color:var(--color-text-muted)]",children:s}):null]})}},5495:(e,t,s)=>{"use strict";s.d(t,{o:()=>n});var r=s(326),a=s(1135);function n({className:e,...t}){return r.jsx("input",{className:(0,a.Z)("ui-input",e),...t})}},2286:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>n,default:()=>i});var r=s(8570);let a=(0,r.createProxy)(String.raw`C:\Users\josep\Documents\AarkayTechnoConsultants\HMS\frontend\app\hotel\audit\page.tsx`),{__esModule:n,$$typeof:l}=a;a.default;let i=(0,r.createProxy)(String.raw`C:\Users\josep\Documents\AarkayTechnoConsultants\HMS\frontend\app\hotel\audit\page.tsx#default`)},5453:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>n,default:()=>i});var r=s(8570);let a=(0,r.createProxy)(String.raw`C:\Users\josep\Documents\AarkayTechnoConsultants\HMS\frontend\app\hotel\layout.tsx`),{__esModule:n,$$typeof:l}=a;a.default;let i=(0,r.createProxy)(String.raw`C:\Users\josep\Documents\AarkayTechnoConsultants\HMS\frontend\app\hotel\layout.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[5819,8591,9158],()=>s(6226));module.exports=r})();