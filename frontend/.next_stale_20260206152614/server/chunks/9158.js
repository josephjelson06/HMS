exports.id=9158,exports.ids=[9158],exports.modules={4459:(e,t,s)=>{Promise.resolve().then(s.bind(s,8143))},8722:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},8143:(e,t,s)=>{"use strict";s.d(t,{Providers:()=>a});var r=s(326),l=s(4089),n=s(7043);function a({children:e}){return r.jsx(n.f,{children:r.jsx(l.H,{children:e})})}},9557:(e,t,s)=>{"use strict";s.d(t,{n:()=>n,E:()=>a});var r=s(326),l=s(7773);function n({permission:e,children:t,fallback:s=null}){let{permissions:n,loading:a}=(0,l.a)();return a?null:!function(e,t){if(e.includes(t))return!0;let s=t.split(":");for(let t of e){if("*"===t)return!0;let e=t.split(":");if(e.length===s.length){let t=!0;for(let r=0;r<e.length;r+=1)if("*"!==e[r]&&e[r]!==s[r]){t=!1;break}if(t)return!0}if(e.length<s.length&&"*"===e[e.length-1]&&e.slice(0,e.length-1).join(":")===s.slice(0,e.length-1).join(":"))return!0}return!1}(n,e)?r.jsx(r.Fragment,{children:s}):r.jsx(r.Fragment,{children:t})}function a({userType:e,children:t,fallback:s=null}){let{user:n,loading:a}=(0,l.a)();return a?null:n&&n.user_type===e?r.jsx(r.Fragment,{children:t}):r.jsx("div",{className:"auth-layout",children:(0,r.jsxs)("div",{className:"glass-card auth-card",children:[r.jsx("h2",{className:"text-2xl",children:"Access denied"}),r.jsx("p",{className:"mt-2 text-sm text-[color:var(--muted)]",children:"You do not have access to this workspace."}),s]})})}},1072:(e,t,s)=>{"use strict";s.d(t,{w:()=>o});var r=s(326),l=s(7577),n=s(5047),a=s(7043),i=s(7773);function o(){let e=(0,n.useRouter)(),{toggleTheme:t,theme:s}=(0,a.F)(),{user:o,logout:d,impersonation:c,stopImpersonation:u}=(0,i.a)(),[h,m]=(0,l.useState)(!1),x=async()=>{m(!0);try{await u(),e.push("/admin/dashboard")}finally{m(!1)}};return(0,r.jsxs)(r.Fragment,{children:[c?.active&&(0,r.jsxs)("div",{className:"mx-6 mt-6 flex flex-wrap items-center justify-between gap-3 rounded-xl border border-amber-300/30 bg-amber-500/10 px-4 py-3 text-sm",children:[(0,r.jsxs)("p",{children:["Impersonating hotel tenant ",r.jsx("span",{className:"font-semibold",children:c.tenant_name})]}),r.jsx("button",{className:"rounded-full border border-amber-200/40 px-4 py-1.5 text-xs font-semibold",onClick:()=>void x(),disabled:h,children:h?"Exiting...":"Exit impersonation"})]}),(0,r.jsxs)("header",{className:"navbar",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-2xl",children:["Welcome, ",o?.first_name??"there"]}),r.jsx("p",{className:"text-sm text-[color:var(--muted)]",children:c?.active?"Admin impersonation active.":"Foundation module ready."})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("button",{className:"rounded-full border border-white/10 px-4 py-2 text-sm",onClick:t,children:["dark"===s?"Light":"Dark"," mode"]}),r.jsx("button",{className:"rounded-full bg-white/10 px-4 py-2 text-sm",onClick:()=>void d(),children:"Logout"})]})]})]})}},4784:(e,t,s)=>{"use strict";s.d(t,{q:()=>x});var r=s(326),l=s(7577),n=s(434),a=s(7773);let i=[{label:"Dashboard",href:"/admin/dashboard"},{label:"Hotel Registry",href:"/admin/hotels"},{label:"Kiosk Fleet",href:"/admin/kiosks"},{label:"Plans",href:"/admin/plans"},{label:"Subscriptions",href:"/admin/subscriptions"},{label:"Invoices",href:"/admin/invoices"},{label:"Reports",href:"/admin/reports"},{label:"Admin Users",href:"/admin/users"},{label:"Admin Roles",href:"/admin/roles"},{label:"Audit Logs",href:"/admin/audit"},{label:"HelpDesk",href:"/admin/helpdesk"},{label:"My Profile",href:"/admin/profile"},{label:"Settings",href:"/admin/settings"}],o=[{label:"Dashboard",href:"/hotel/dashboard"},{label:"Guest Registry",href:"/hotel/guests"},{label:"Room Management",href:"/hotel/rooms"},{label:"Incidents Record",href:"/hotel/incidents"},{label:"Users Management",href:"/hotel/users"},{label:"Roles Management",href:"/hotel/roles"},{label:"Kiosk Settings",href:"/hotel/kiosks"},{label:"Subscription & Billing",href:"/hotel/billing"},{label:"Help & Support",href:"/hotel/support"},{label:"Audit Logs",href:"/hotel/audit"},{label:"Reports",href:"/hotel/reports"},{label:"My Profile",href:"/hotel/profile"},{label:"Settings",href:"/hotel/settings"}];function d({variant:e,onNavigate:t}){let{user:s}=(0,a.a)();return(0,r.jsxs)("aside",{className:"sidebar glass-panel",children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("p",{className:"text-xs uppercase text-[color:var(--muted)]",children:"HMS"}),(0,r.jsxs)("h2",{className:"text-xl font-semibold",children:["admin"===e?"Admin":"Hotel"," Panel"]}),r.jsx("p",{className:"text-xs text-[color:var(--muted)]",children:s?.email??""})]}),r.jsx("nav",{className:"space-y-2",children:("admin"===e?i:o).map(e=>r.jsx(n.default,{href:e.href,onClick:t,children:e.label},e.href))})]})}var c=s(1135);function u({open:e,onClose:t,children:s}){return(0,r.jsxs)(r.Fragment,{children:[r.jsx("button",{"aria-label":"Close sidebar",className:(0,c.Z)("sidebar-drawer-overlay",e&&"sidebar-drawer-overlay-open"),onClick:t}),r.jsx("aside",{className:(0,c.Z)("sidebar-drawer ui-anim",e&&"sidebar-drawer-open"),children:s})]})}function h({className:e,label:t,children:s,...l}){return r.jsx("button",{"aria-label":t,title:t,className:(0,c.Z)("ui-icon-btn ui-btn ui-btn-outline ui-anim",e),...l,children:s})}function m(){return r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"18",height:"18",children:r.jsx("path",{d:"M3 6h18M3 12h18M3 18h18"})})}function x({variant:e,children:t}){let[s,n]=(0,l.useState)(!1);return(0,r.jsxs)("div",{className:"app-shell",children:[r.jsx("div",{className:"hidden lg:block",children:r.jsx(d,{variant:e})}),(0,r.jsxs)("div",{className:"min-w-0",children:[(0,r.jsxs)("div",{className:"app-mobile-topbar lg:hidden",children:[r.jsx(h,{label:"Open navigation",onClick:()=>n(!0),children:r.jsx(m,{})}),(0,r.jsxs)("p",{className:"text-sm font-medium capitalize",children:[e," workspace"]}),r.jsx("span",{})]}),t]}),r.jsx("div",{className:"lg:hidden",children:r.jsx(u,{open:s,onClose:()=>n(!1),children:r.jsx(d,{variant:e,onNavigate:()=>n(!1)})})})]})}},4089:(e,t,s)=>{"use strict";s.d(t,{H:()=>o,E:()=>d});var r=s(326),l=s(7577),n=s(9684);let a={login:(e,t)=>(0,n.S)("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})}),refresh:()=>(0,n.S)("/auth/refresh",{method:"POST"}),logout:()=>(0,n.S)("/auth/logout",{method:"POST"}),me:()=>(0,n.S)("/auth/me"),startImpersonation:e=>(0,n.S)("/auth/impersonation/start",{method:"POST",body:JSON.stringify(e)}),stopImpersonation:()=>(0,n.S)("/auth/impersonation/stop",{method:"POST"})},i=(0,l.createContext)(void 0);function o({children:e}){let[t,s]=(0,l.useState)(null),[n,o]=(0,l.useState)([]),[d,c]=(0,l.useState)(null),[u,h]=(0,l.useState)(null),[m,x]=(0,l.useState)(!0),f=(0,l.useCallback)(e=>{s(e.user),o(e.permissions),c(e.tenant??null),h(e.impersonation??null)},[]);(0,l.useCallback)(async()=>{try{let e=await a.me();f(e)}catch{try{let e=await a.refresh();f(e)}catch{s(null),o([]),c(null),h(null)}}finally{x(!1)}},[f]);let b=(0,l.useCallback)(async(e,t)=>{let s=await a.login(e,t);return f(s),s},[f]),p=(0,l.useCallback)(async()=>{await a.logout(),s(null),o([]),c(null),h(null)},[]),v=(0,l.useCallback)(async()=>{f(await a.refresh())},[f]),g=(0,l.useCallback)(async e=>{let t=await a.startImpersonation(e);return f(t),t},[f]),j=(0,l.useCallback)(async()=>{let e=await a.stopImpersonation();return f(e),e},[f]),y=(0,l.useMemo)(()=>({user:t,permissions:n,tenant:d,impersonation:u,loading:m,login:b,logout:p,refresh:v,startImpersonation:g,stopImpersonation:j}),[t,n,d,u,m,b,p,v,g,j]);return r.jsx(i.Provider,{value:y,children:e})}function d(){let e=(0,l.useContext)(i);if(!e)throw Error("useAuthContext must be used within AuthProvider");return e}},7043:(e,t,s)=>{"use strict";s.d(t,{F:()=>i,f:()=>a});var r=s(326),l=s(7577);let n=(0,l.createContext)(void 0);function a({children:e}){let[t,s]=(0,l.useState)("dark"),a=(0,l.useCallback)(()=>{let e="dark"===t?"light":"dark";s(e),document.documentElement.setAttribute("data-theme",e)},[t]),i=(0,l.useMemo)(()=>({theme:t,toggleTheme:a}),[t,a]);return r.jsx(n.Provider,{value:i,children:e})}function i(){let e=(0,l.useContext)(n);if(!e)throw Error("useTheme must be used within ThemeProvider");return e}},9684:(e,t,s)=>{"use strict";s.d(t,{S:()=>l});let r=process.env.NEXT_PUBLIC_API_URL??"http://localhost:8000/api";async function l(e,t={}){let s=`${r}${e}`,l=new Headers(t.headers??{}),n=t.method?.toUpperCase()??"GET";if("GET"!==n&&"HEAD"!==n){let e=function(){if("undefined"==typeof document)return null;let e=document.cookie.match(/csrf_token=([^;]+)/);return e?decodeURIComponent(e[1]):null}();e&&l.set("X-CSRF-Token",e),l.has("Content-Type")||l.set("Content-Type","application/json")}let a=await fetch(s,{...t,headers:l,credentials:"include"});if(!a.ok)throw Error(await a.text()||a.statusText);if(204===a.status)return;let i=await a.text();if(i)return JSON.parse(i)}},7773:(e,t,s)=>{"use strict";s.d(t,{a:()=>l});var r=s(4089);function l(){return(0,r.E)()}},4752:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c,metadata:()=>d});var r=s(9510);s(7633);var l=s(8570);let n=(0,l.createProxy)(String.raw`C:\Users\josep\Documents\AarkayTechnoConsultants\HMS\frontend\app\providers.tsx`),{__esModule:a,$$typeof:i}=n;n.default;let o=(0,l.createProxy)(String.raw`C:\Users\josep\Documents\AarkayTechnoConsultants\HMS\frontend\app\providers.tsx#Providers`),d={title:"HMS",description:"Hotel Management System"};function c({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{children:r.jsx(o,{children:e})})})}},7633:()=>{}};