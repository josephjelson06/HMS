(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{5147:function(t,e,n){Promise.resolve().then(n.bind(n,9082)),Promise.resolve().then(n.t.bind(n,4332,23))},9082:function(t,e,n){"use strict";n.d(e,{Providers:function(){return i}});var r=n(7437),o=n(1288),u=n(6058);function i(t){let{children:e}=t;return(0,r.jsx)(u.f,{children:(0,r.jsx)(o.H,{children:e})})}},1288:function(t,e,n){"use strict";n.d(e,{H:function(){return l},E:function(){return s}});var r=n(7437),o=n(2265),u=n(5139);let i={login:(t,e)=>(0,u.S)("/auth/login",{method:"POST",body:JSON.stringify({email:t,password:e})}),refresh:()=>(0,u.S)("/auth/refresh",{method:"POST"}),logout:()=>(0,u.S)("/auth/logout",{method:"POST"}),me:()=>(0,u.S)("/auth/me"),startImpersonation:t=>(0,u.S)("/auth/impersonation/start",{method:"POST",body:JSON.stringify(t)}),stopImpersonation:()=>(0,u.S)("/auth/impersonation/stop",{method:"POST"})},a=(0,o.createContext)(void 0);function l(t){let{children:e}=t,[n,u]=(0,o.useState)(null),[l,s]=(0,o.useState)([]),[c,f]=(0,o.useState)(null),[h,d]=(0,o.useState)(null),[m,p]=(0,o.useState)(!0),v=(0,o.useCallback)(t=>{var e,n;u(t.user),s(t.permissions),f(null!==(e=t.tenant)&&void 0!==e?e:null),d(null!==(n=t.impersonation)&&void 0!==n?n:null)},[]),y=(0,o.useCallback)(async()=>{try{let t=await i.me();v(t)}catch(t){try{let t=await i.refresh();v(t)}catch(t){u(null),s([]),f(null),d(null)}}finally{p(!1)}},[v]);(0,o.useEffect)(()=>{y()},[y]);let T=(0,o.useCallback)(async(t,e)=>{let n=await i.login(t,e);return v(n),n},[v]),g=(0,o.useCallback)(async()=>{await i.logout(),u(null),s([]),f(null),d(null)},[]),b=(0,o.useCallback)(async()=>{v(await i.refresh())},[v]),w=(0,o.useCallback)(async t=>{let e=await i.startImpersonation(t);return v(e),e},[v]),S=(0,o.useCallback)(async()=>{let t=await i.stopImpersonation();return v(t),t},[v]),k=(0,o.useMemo)(()=>({user:n,permissions:l,tenant:c,impersonation:h,loading:m,login:T,logout:g,refresh:b,startImpersonation:w,stopImpersonation:S}),[n,l,c,h,m,T,g,b,w,S]);return(0,r.jsx)(a.Provider,{value:k,children:e})}function s(){let t=(0,o.useContext)(a);if(!t)throw Error("useAuthContext must be used within AuthProvider");return t}},6058:function(t,e,n){"use strict";n.d(e,{F:function(){return a},f:function(){return i}});var r=n(7437),o=n(2265);let u=(0,o.createContext)(void 0);function i(t){let{children:e}=t,[n,i]=(0,o.useState)("dark");(0,o.useEffect)(()=>{let t=localStorage.getItem("hms-theme");"light"===t||"dark"===t?(i(t),document.documentElement.setAttribute("data-theme",t)):document.documentElement.setAttribute("data-theme","dark")},[]);let a=(0,o.useCallback)(()=>{let t="dark"===n?"light":"dark";i(t),localStorage.setItem("hms-theme",t),document.documentElement.setAttribute("data-theme",t)},[n]),l=(0,o.useMemo)(()=>({theme:n,toggleTheme:a}),[n,a]);return(0,r.jsx)(u.Provider,{value:l,children:e})}function a(){let t=(0,o.useContext)(u);if(!t)throw Error("useTheme must be used within ThemeProvider");return t}},5139:function(t,e,n){"use strict";var r;n.d(e,{S:function(){return u}});let o=null!==(r=n(357).env.NEXT_PUBLIC_API_URL)&&void 0!==r?r:"http://localhost:8000/api";async function u(t){var e,n,r;let u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i="".concat(o).concat(t),a=new Headers(null!==(n=u.headers)&&void 0!==n?n:{}),l=null!==(r=null===(e=u.method)||void 0===e?void 0:e.toUpperCase())&&void 0!==r?r:"GET";if("GET"!==l&&"HEAD"!==l){let t=function(){if("undefined"==typeof document)return null;let t=document.cookie.match(/csrf_token=([^;]+)/);return t?decodeURIComponent(t[1]):null}();t&&a.set("X-CSRF-Token",t),a.has("Content-Type")||a.set("Content-Type","application/json")}let s=await fetch(i,{...u,headers:a,credentials:"include"});if(!s.ok)throw Error(await s.text()||s.statusText);if(204===s.status)return;let c=await s.text();if(c)return JSON.parse(c)}},357:function(t,e,n){"use strict";var r,o;t.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(o=n.g.process)?void 0:o.env)?n.g.process:n(8081)},8081:function(t){!function(){var e={229:function(t){var e,n,r,o=t.exports={};function u(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===u||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:u}catch(t){e=u}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(t){n=i}}();var l=[],s=!1,c=-1;function f(){s&&r&&(s=!1,r.length?l=r.concat(l):c=-1,l.length&&h())}function h(){if(!s){var t=a(f);s=!0;for(var e=l.length;e;){for(r=l,l=[];++c<e;)r&&r[c].run();c=-1,e=l.length}r=null,s=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function m(){}o.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new d(t,e)),1!==l.length||s||a(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(t){return[]},o.binding=function(t){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},n={};function r(t){var o=n[t];if(void 0!==o)return o.exports;var u=n[t]={exports:{}},i=!0;try{e[t](u,u.exports,r),i=!1}finally{i&&delete n[t]}return u.exports}r.ab="//";var o=r(229);t.exports=o}()},4332:function(){}},function(t){t.O(0,[7228,2971,7023,1744],function(){return t(t.s=5147)}),_N_E=t.O()}]);